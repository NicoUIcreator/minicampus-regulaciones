<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minicampus Virtual: Regulaciones Europeas</title>
    <!-- Incluye Tailwind CSS para un estilo moderno y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #374151;
        }
        .sidebar {
            width: 280px;
            min-width: 280px;
            transition: transform 0.3s ease-in-out;
            transform: translateX(0);
        }
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        .main-content {
            flex-grow: 1;
            padding: 1.5rem;
            transition: margin-left 0.3s ease-in-out;
        }
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                height: 100%;
                z-index: 50;
                box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            }
            .main-content {
                margin-left: 0;
            }
        }
        .nav-item.active {
            background-color: #e5e7eb;
            font-weight: 600;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        .module-content, .test-section, .game-section, .glossary-section, .simulator-section {
            display: none;
        }
        .module-content.active, .test-section.active, .game-section.active, .glossary-section.active, .simulator-section.active {
            display: block;
        }
        .correct {
            color: #10b981;
            font-weight: 600;
        }
        .incorrect {
            color: #ef4444;
            font-weight: 600;
        }
        .badge {
            transition: transform 0.3s ease-in-out;
        }
        .badge:hover {
            transform: scale(1.1);
        }
        .tooltip {
            visibility: hidden;
            background-color: #374151;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #374151 transparent transparent transparent;
        }
        .badge-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        .glossary-term {
            cursor: pointer;
            text-decoration: underline;
            color: #4b5563;
        }
    </style>
</head>
<body class="flex flex-col md:flex-row h-screen overflow-hidden">

    <!-- Sidebar de navegación -->
    <aside id="sidebar" class="sidebar bg-white p-6 shadow-lg overflow-y-auto">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-gray-800">Minicampus</h1>
            <button id="toggle-sidebar" class="md:hidden text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Barra de Progreso Global -->
        <div class="bg-gray-100 rounded-lg p-4 mb-6">
            <h2 class="text-sm font-semibold text-gray-600 mb-2">Progreso General</h2>
            <div class="w-full bg-gray-300 rounded-full h-2.5">
                <div id="progress-bar" class="bg-blue-500 h-2.5 rounded-full progress-bar-fill" style="width: 0%;"></div>
            </div>
            <p id="progress-text" class="text-right text-xs mt-1 text-gray-500">0%</p>
        </div>

        <!-- Menú de Módulos -->
        <nav class="space-y-2">
            <h2 class="text-sm font-semibold text-gray-600 mb-2">Módulos de Aprendizaje</h2>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-1">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 1: ISO 27001</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-2">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 2: DORA</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-3">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 3: NIS2</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-4">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 4: Sinergias</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-5">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 5: Desafíos</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="module-6">
                <i class="fas fa-book-open mr-3 text-blue-500"></i>
                <span class="text-gray-700">Módulo 6: Implementación</span>
            </a>
        </nav>

        <!-- Menú de Herramientas -->
        <nav class="space-y-2 mt-6">
            <h2 class="text-sm font-semibold text-gray-600 mb-2">Herramientas Interactivas</h2>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="games">
                <i class="fas fa-gamepad mr-3 text-purple-500"></i>
                <span class="text-gray-700">Juegos</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="glossary">
                <i class="fas fa-book mr-3 text-green-500"></i>
                <span class="text-gray-700">Glosario</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="simulator">
                <i class="fas fa-robot mr-3 text-orange-500"></i>
                <span class="text-gray-700">Simulador</span>
            </a>
            <a href="#" class="nav-item flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors" data-section="badges">
                <i class="fas fa-medal mr-3 text-yellow-500"></i>
                <span class="text-gray-700">Logros</span>
            </a>
        </nav>
    </aside>

    <!-- Contenido principal y toggle para móvil -->
    <div class="flex-1 overflow-y-auto main-content">
        <button id="open-sidebar" class="md:hidden text-gray-500 hover:text-gray-700 p-2 rounded-lg bg-white shadow-md mb-4">
            <i class="fas fa-bars"></i>
        </button>

        <div id="content-area" class="bg-white p-8 rounded-xl shadow-lg">

            <!-- Sección de Bienvenida (por defecto) -->
            <div id="welcome-section" class="active">
                <h1 class="text-3xl font-bold text-gray-800 mb-4">Bienvenido al Minicampus de Ciberseguridad</h1>
                <p class="text-lg text-gray-600 mb-6">Explora y aprende sobre las regulaciones más importantes de la ciberseguridad europea: ISO 27001, DORA y NIS2.</p>
                <img src="https://placehold.co/800x400/e5e7eb/7f8c8d?text=Ilustración+de+Ciberseguridad" alt="Ilustración de Ciberseguridad" class="rounded-lg mb-6 shadow-md">
                <p class="text-gray-700 leading-relaxed">Este campus interactivo está diseñado para ayudarte a entender la interconexión entre estos marcos regulatorios. Navega por los módulos, pon a prueba tus conocimientos y explora las herramientas interactivas para una experiencia de aprendizaje completa. ¡Empieza haciendo clic en cualquier módulo del menú lateral!</p>
            </div>

            <!-- Módulo 1: ISO 27001 -->
            <div id="module-1" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 1: ISO/IEC 27001</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">ISO/IEC 27001 es un estándar internacional para la gestión de la seguridad de la información. Su objetivo principal es ayudar a las organizaciones a establecer, implementar, mantener y mejorar continuamente un Sistema de Gestión de la Seguridad de la Información (SGSI) para proteger la <span class="glossary-term" data-term="CIA">Confidencialidad, Integridad y Disponibilidad (CIA)</span> de sus activos de información. A diferencia de DORA y NIS2, ISO 27001 es un estándar voluntario.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Controles Clave</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><span class="font-semibold">Controles Organizacionales:</span> Políticas, reglas y procedimientos de la organización.</li>
                        <li><span class="font-semibold">Controles Orientados a las Personas:</span> Formación, concienciación y responsabilidades del personal.</li>
                        <li><span class="font-semibold">Controles Físicos:</span> Seguridad de activos tangibles y ubicaciones.</li>
                        <li><span class="font-semibold">Controles Tecnológicos:</span> Procedimientos digitales, autenticación y acceso.</li>
                    </ul>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-1">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿Cuál es el objetivo principal de ISO 27001?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="a" class="mr-2"> Proteger la Confidencialidad, Integridad y Disponibilidad.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="b" class="mr-2"> Imponer sanciones legales a las empresas.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="c" class="mr-2"> Regular el sector financiero.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿Es la norma ISO 27001 de cumplimiento obligatorio en la Unión Europea?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="a" class="mr-2"> Sí, es una ley obligatoria.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="b" class="mr-2"> No, es un estándar voluntario.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="c" class="mr-2"> Solo para el sector público.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>

            <!-- Módulo 2: DORA -->
            <div id="module-2" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 2: DORA</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">El Reglamento de Resiliencia Operativa Digital (DORA) es un marco legislativo de la Unión Europea para el sector financiero. Su objetivo es asegurar que las entidades financieras puedan soportar, responder y recuperarse de interrupciones y amenazas relacionadas con las TIC. A diferencia de ISO 27001, DORA es una regulación obligatoria con un plazo de cumplimiento estricto.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Los 5 Pilares de DORA</h3>
                    <img src="https://placehold.co/600x300/e5e7eb/7f8c8d?text=Diagrama+de+los+5+Pilares+de+DORA" alt="Diagrama de los 5 Pilares de DORA" class="rounded-lg mb-4 shadow-md mx-auto">
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Gestión de riesgos de las TIC</li>
                        <li>Notificación de incidentes</li>
                        <li>Pruebas de resistencia operativa digital</li>
                        <li>Gestión del riesgo frente a terceros</li>
                        <li>Intercambio de información</li>
                    </ol>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-2">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿A qué sector se aplica principalmente el reglamento DORA?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="a" class="mr-2"> Sector energético.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="b" class="mr-2"> Sector de transporte.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="c" class="mr-2"> Sector financiero.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿Es la notificación de incidentes uno de los pilares de DORA?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q4" value="a" class="mr-2"> Sí.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q4" value="b" class="mr-2"> No.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>
            
            <!-- Módulo 3: NIS2 -->
            <div id="module-3" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 3: NIS2</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">La Directiva NIS2 es una evolución de la directiva original que busca crear un nivel de ciberseguridad elevado en toda la UE. Amplía el ámbito de aplicación a muchos más sectores, clasificándolos en "Entidades Esenciales" y "Entidades Importantes". Impone obligaciones rigurosas de gestión de riesgos y notificación de incidentes, con sanciones significativamente más severas.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Sectores Clave</h3>
                    <table class="min-w-full bg-white rounded-lg shadow-md">
                        <thead>
                            <tr class="bg-gray-200">
                                <th class="py-2 px-4 text-left text-sm font-semibold text-gray-700 rounded-tl-lg">Entidades Esenciales</th>
                                <th class="py-2 px-4 text-left text-sm font-semibold text-gray-700 rounded-tr-lg">Entidades Importantes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">Energía</td>
                                <td class="py-2 px-4 border-b">Servicios postales</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">Transporte</td>
                                <td class="py-2 px-4 border-b">Gestión de residuos</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">Banca</td>
                                <td class="py-2 px-4 border-b">Fabricación de productos clave</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-3">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿A qué se refiere el término "Entidades Esenciales" en NIS2?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q5" value="a" class="mr-2"> Empresas que operan en sectores de baja criticidad.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q5" value="b" class="mr-2"> Empresas que operan en sectores de alta criticidad.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q5" value="c" class="mr-2"> Empresas que no necesitan cumplir con la directiva.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿Las sanciones de NIS2 son más severas que las de la directiva anterior?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q6" value="a" class="mr-2"> Sí.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q6" value="b" class="mr-2"> No.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>

            <!-- Módulo 4: Sinergias -->
            <div id="module-4" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 4: Sinergias y Complementariedad</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">ISO 27001, DORA y NIS2 no deben verse como proyectos aislados, sino como marcos complementarios. ISO 27001 actúa como la base estratégica para el cumplimiento, ya que su enfoque de SGSI y gestión de riesgos abarca gran parte de las medidas técnicas y organizativas requeridas por DORA y NIS2. La certificación ISO 27001 de un proveedor simplifica la gestión del riesgo de terceros, que es un requisito clave de DORA y NIS2.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Mapeo de Requisitos</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white rounded-lg shadow-md">
                            <thead>
                                <tr class="bg-gray-200">
                                    <th class="py-2 px-4 text-left text-sm font-semibold text-gray-700">Requisito DORA/NIS2</th>
                                    <th class="py-2 px-4 text-left text-sm font-semibold text-gray-700">Cláusula o Control ISO 27001</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-2 px-4 border-b">Gobernanza y gestión de riesgos</td>
                                    <td class="py-2 px-4 border-b">Cláusula 5 y 6.1</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">Notificación de incidentes</td>
                                    <td class="py-2 px-4 border-b">Cláusula 16.1</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">Pruebas de resiliencia digital</td>
                                    <td class="py-2 px-4 border-b">Anexo A.8.20</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">Gestión de riesgos de terceros</td>
                                    <td class="py-2 px-4 border-b">Anexo A.15</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-4">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿Cómo puede ISO 27001 actuar como base para el cumplimiento de DORA y NIS2?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q7" value="a" class="mr-2"> Proporcionando un marco de gestión de riesgos y controles.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q7" value="b" class="mr-2"> Al ser una ley obligatoria.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q7" value="c" class="mr-2"> Al no tener requisitos técnicos.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿La certificación ISO 27001 de un proveedor simplifica la gestión de riesgos de terceros?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q8" value="a" class="mr-2"> Sí, porque demuestra diligencia debida.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q8" value="b" class="mr-2"> No, no tiene relación.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>

            <!-- Módulo 5: Desafíos -->
            <div id="module-5" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 5: Requisitos Específicos y Puntos de Desconexión</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">Aunque ISO 27001 es una base sólida, DORA y NIS2 tienen requisitos específicos que van más allá. Las principales diferencias radican en los plazos y formatos de notificación de incidentes, la obligatoriedad de pruebas de penetración y, sobre todo, la responsabilidad personal y legal que recae sobre la alta dirección, lo que no ocurre con ISO 27001.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Diferencias Clave</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><span class="font-semibold">Obligaciones de Notificación:</span> DORA y NIS2 establecen plazos estrictos y detallados.</li>
                        <li><span class="font-semibold">Pruebas Obligatorias:</span> DORA y NIS2 exigen pruebas de penetración y simulación.</li>
                        <li><span class="font-semibold">Responsabilidad de la Alta Dirección:</span> DORA y NIS2 imponen sanciones legales a los directivos.</li>
                    </ul>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-5">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿Qué es un requisito de DORA y NIS2 que no se especifica en ISO 27001?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q9" value="a" class="mr-2"> Notificación detallada de incidentes con plazos estrictos.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q9" value="b" class="mr-2"> Controles de acceso.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q9" value="c" class="mr-2"> Gestión de la cadena de suministro.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿La alta dirección puede ser sancionada personalmente por el incumplimiento de DORA y NIS2?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q10" value="a" class="mr-2"> No, solo la empresa.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q10" value="b" class="mr-2"> Sí, la responsabilidad es personal y legal.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>

            <!-- Módulo 6: Implementación -->
            <div id="module-6" class="module-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Módulo 6: Guía de Implementación</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Resumen</h3>
                    <p class="text-gray-700">La implementación de estos marcos requiere una hoja de ruta estratégica que comience con el compromiso de la alta dirección. Se debe realizar un análisis de brechas para identificar las áreas de mejora, seguido del diseño de una estrategia unificada que utilice ISO 27001 como base. La capacitación continua y el monitoreo constante son esenciales para mantener el cumplimiento y la resiliencia.</p>
                </div>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <h3 class="text-xl font-semibold mb-2">Hoja de Ruta Estratégica</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">1</div>
                            <p class="flex-1 text-gray-700 font-semibold">Compromiso de la alta dirección</p>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">2</div>
                            <p class="flex-1 text-gray-700 font-semibold">Análisis de brechas (GAP Analysis)</p>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">3</div>
                            <p class="flex-1 text-gray-700 font-semibold">Diseño e implementación de una estrategia unificada</p>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">4</div>
                            <p class="flex-1 text-gray-700 font-semibold">Capacitación y concienciación continua</p>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">5</div>
                            <p class="flex-1 text-gray-700 font-semibold">Monitoreo y mejora continua</p>
                        </div>
                    </div>
                </div>

                <!-- Test de Autoevaluación -->
                <div class="test-section mt-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Test de Autoevaluación</h3>
                    <div id="test-6">
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">1. ¿Cuál es el primer paso crucial en la hoja de ruta de implementación?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q11" value="a" class="mr-2"> Comprar un software de seguridad.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q11" value="b" class="mr-2"> Obtener el compromiso de la alta dirección.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q11" value="c" class="mr-2"> Realizar una auditoría externa.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <div class="mb-4">
                            <p class="font-semibold text-gray-700">2. ¿Es el cumplimiento un evento único o un proceso continuo?</p>
                            <div class="space-y-2 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q12" value="a" class="mr-2"> Es un evento único.
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q12" value="b" class="mr-2"> Es un proceso continuo de monitoreo y mejora.
                                </label>
                            </div>
                            <p class="feedback-text mt-2 text-sm"></p>
                        </div>
                        <button class="check-answers-btn bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4">Comprobar Respuestas</button>
                    </div>
                </div>
            </div>

            <!-- Sección de Glosario -->
            <div id="glossary" class="glossary-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Glosario de Términos</h2>
                <div class="p-6 bg-gray-100 rounded-lg mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">SGSI</h3>
                            <p class="text-sm text-gray-600 mt-1">Sistema de Gestión de la Seguridad de la Información. Conjunto de políticas y procedimientos para gestionar los riesgos de seguridad.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">DORA</h3>
                            <p class="text-sm text-gray-600 mt-1">Digital Operational Resilience Act. Reglamento de la UE para la resiliencia digital en el sector financiero.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">NIS2</h3>
                            <p class="text-sm text-gray-600 mt-1">Directiva de Seguridad de Redes y Sistemas de Información. Directiva de la UE que refuerza los requisitos de ciberseguridad en sectores críticos.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">ISO 27001</h3>
                            <p class="text-sm text-gray-600 mt-1">Estándar internacional para la gestión de la seguridad de la información. Voluntario.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">CIA</h3>
                            <p class="text-sm text-gray-600 mt-1">Confidencialidad, Integridad y Disponibilidad. Los tres pilares de la seguridad de la información.</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <h3 class="font-semibold text-gray-800">TIC</h3>
                            <p class="text-sm text-gray-600 mt-1">Tecnologías de la Información y la Comunicación.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Juegos -->
            <div id="games" class="game-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Juegos Interactivos</h2>
                <div id="game-container" class="space-y-8">
                    
                    <!-- Juego 1: Emparejar Conceptos -->
                    <div id="matching-game" class="bg-gray-100 p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">Juego de Emparejamiento</h3>
                        <p class="mb-4 text-gray-700">Arrastra cada término a su definición correcta.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="flex flex-col items-center">
                                <div id="term-DORA" class="term-item p-4 bg-blue-400 text-white rounded-lg shadow-sm cursor-grab" draggable="true" data-term="DORA">DORA</div>
                                <div id="term-NIS2" class="term-item p-4 bg-purple-400 text-white rounded-lg shadow-sm cursor-grab mt-4" draggable="true" data-term="NIS2">NIS2</div>
                                <div id="term-ISO" class="term-item p-4 bg-green-400 text-white rounded-lg shadow-sm cursor-grab mt-4" draggable="true" data-term="ISO">ISO 27001</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div id="drop-1" class="drop-zone w-full p-4 bg-white rounded-lg shadow-inner flex items-center justify-center border-2 border-dashed border-gray-400" data-def="financial-resilience">Resiliencia financiera</div>
                                <div id="drop-2" class="drop-zone w-full p-4 bg-white rounded-lg shadow-inner flex items-center justify-center border-2 border-dashed border-gray-400 mt-4" data-def="critical-sectors">Sectores críticos</div>
                                <div id="drop-3" class="drop-zone w-full p-4 bg-white rounded-lg shadow-inner flex items-center justify-center border-2 border-dashed border-gray-400 mt-4" data-def="info-security-standard">Estándar de seguridad</div>
                            </div>
                        </div>
                        <p id="match-feedback" class="text-center mt-4"></p>
                    </div>

                    <!-- Juego 2: Completar Frases -->
                    <div id="fill-in-the-blank-game" class="bg-gray-100 p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4">Completa la Frase</h3>
                        <p class="mb-4 text-gray-700">Completa la siguiente frase arrastrando las palabras correctas.</p>
                        <div class="flex flex-col items-center">
                            <div class="mb-4 text-center">
                                <p class="text-lg">La directiva NIS2 clasifica las entidades en ___ y ___.</p>
                            </div>
                            <div class="flex flex-wrap justify-center gap-2 mb-4">
                                <div class="word-bank-item p-3 bg-gray-300 rounded-lg cursor-grab" draggable="true" data-word="Esenciales">Esenciales</div>
                                <div class="word-bank-item p-3 bg-gray-300 rounded-lg cursor-grab" draggable="true" data-word="Secundarias">Secundarias</div>
                                <div class="word-bank-item p-3 bg-gray-300 rounded-lg cursor-grab" draggable="true" data-word="Importantes">Importantes</div>
                                <div class="word-bank-item p-3 bg-gray-300 rounded-lg cursor-grab" draggable="true" data-word="Menores">Menores</div>
                            </div>
                            <div id="blank-drop-zone" class="w-full p-4 bg-white rounded-lg shadow-inner flex justify-center items-center border-2 border-dashed border-gray-400">
                                <span class="placeholder-text">Arrastra las palabras aquí</span>
                            </div>
                        </div>
                        <button id="check-fill-in-the-blank" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors mt-4 block mx-auto">Comprobar</button>
                        <p id="fill-in-the-blank-feedback" class="text-center mt-2"></p>
                    </div>

                </div>
            </div>

            <!-- Sección de Simulador -->
            <div id="simulator" class="simulator-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Simulador de Riesgos</h2>
                <div class="bg-gray-100 p-6 rounded-lg mb-6">
                    <p class="text-gray-700 mb-4">Simula un escenario de riesgo. Asigna un control de ISO 27001 para mitigar la amenaza y observa el impacto.</p>
                    <div id="scenario-display" class="bg-white p-4 rounded-lg shadow-md mb-4">
                        <h3 class="font-semibold text-gray-800">Escenario:</h3>
                        <p id="scenario-text" class="text-gray-600 mt-2">Un empleado recibe un correo de phishing y hace clic en un enlace malicioso.</p>
                    </div>
                    
                    <div class="mb-4">
                        <label for="control-select" class="block font-semibold text-gray-700 mb-2">Selecciona un Control ISO 27001:</label>
                        <select id="control-select" class="w-full p-2 rounded-lg border border-gray-300">
                            <option value="none">Selecciona un control</option>
                            <option value="concienciacion">Campaña de concienciación y formación en ciberseguridad</option>
                            <option value="acceso-fisico">Controles de acceso físico a servidores</option>
                            <option value="copias-seguridad">Política de copias de seguridad</option>
                        </select>
                    </div>
                    <button id="simulate-btn" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">Simular</button>
                    <div id="simulation-result" class="mt-4 p-4 rounded-lg hidden"></div>
                </div>
            </div>

            <!-- Sección de Logros -->
            <div id="badges" class="badges-section">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Logros Obtenidos</h2>
                <div id="badges-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-6 bg-gray-100 rounded-lg">
                    <!-- Badges se insertarán aquí dinámicamente -->
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-gem text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Aprendiz de ISO</p>
                        <span class="tooltip">Completa el Módulo 1</span>
                    </div>
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-shield-alt text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Maestro de DORA</p>
                        <span class="tooltip">Completa el Módulo 2</span>
                    </div>
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-lock text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Gurú de NIS2</p>
                        <span class="tooltip">Completa el Módulo 3</span>
                    </div>
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-handshake text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Integrador</p>
                        <span class="tooltip">Completa el Módulo 4</span>
                    </div>
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-exclamation-triangle text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Estratega</p>
                        <span class="tooltip">Completa el Módulo 5</span>
                    </div>
                    <div class="badge-container flex flex-col items-center">
                        <i class="fas fa-rocket text-gray-300 text-5xl badge"></i>
                        <p class="text-center mt-2 text-gray-500 font-semibold">Implementador</p>
                        <span class="tooltip">Completa el Módulo 6</span>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Estado global de la aplicación
            const appState = {
                currentSection: 'welcome-section',
                totalModules: 6,
                completedModules: new Set(),
                score: 0,
                badges: new Set()
            };

            // Definición de respuestas y feedback para los tests
            const testAnswers = {
                'test-1': {
                    'q1': 'a',
                    'q2': 'b',
                    feedback: {
                        'a': '¡Correcto! ISO 27001 busca proteger la Confidencialidad, Integridad y Disponibilidad (CIA).',
                        'b': 'Incorrecto. ISO 27001 es un estándar voluntario.',
                        'c': 'Incorrecto. La respuesta correcta es la a. DORA es el reglamento que se enfoca en el sector financiero.',
                    }
                },
                'test-2': {
                    'q3': 'c',
                    'q4': 'a',
                    feedback: {
                        'c': '¡Correcto! DORA está diseñado para fortalecer la resiliencia en el sector financiero.',
                        'a': '¡Correcto! La notificación de incidentes es uno de los 5 pilares de DORA.',
                    }
                },
                'test-3': {
                    'q5': 'b',
                    'q6': 'a',
                    feedback: {
                        'b': '¡Correcto! Las Entidades Esenciales operan en sectores de alta criticidad.',
                        'a': '¡Correcto! El régimen de sanciones de NIS2 es significativamente más severo.',
                    }
                },
                'test-4': {
                    'q7': 'a',
                    'q8': 'a',
                    feedback: {
                        'a': '¡Correcto! ISO 27001 proporciona una base sólida con su enfoque de gestión de riesgos.',
                        'a': '¡Correcto! La certificación ISO 27001 actúa como una evidencia de diligencia debida.',
                    }
                },
                'test-5': {
                    'q9': 'a',
                    'q10': 'b',
                    feedback: {
                        'a': '¡Correcto! Los plazos de notificación son un requisito específico de DORA y NIS2.',
                        'b': '¡Correcto! DORA y NIS2 imponen una responsabilidad personal y legal a la alta dirección.',
                    }
                },
                'test-6': {
                    'q11': 'b',
                    'q12': 'b',
                    feedback: {
                        'b': '¡Correcto! Sin el compromiso de la alta dirección, la implementación es muy difícil.',
                        'b': '¡Correcto! El cumplimiento es un proceso continuo de monitoreo y mejora.',
                    }
                }
            };

            // Mapeo de módulos a tests
            const moduleTests = {
                'module-1': 'test-1',
                'module-2': 'test-2',
                'module-3': 'test-3',
                'module-4': 'test-4',
                'module-5': 'test-5',
                'module-6': 'test-6'
            };

            // Mapeo de módulos a badges
            const moduleBadges = {
                'module-1': 'Aprendiz de ISO',
                'module-2': 'Maestro de DORA',
                'module-3': 'Gurú de NIS2',
                'module-4': 'Integrador',
                'module-5': 'Estratega',
                'module-6': 'Implementador',
            };

            // Definiciones del glosario
            const glossaryData = {
                'CIA': 'Confidencialidad, Integridad y Disponibilidad. Los tres pilares de la seguridad de la información.',
                'SGSI': 'Sistema de Gestión de la Seguridad de la Información. Un conjunto de políticas, procedimientos y sistemas para gestionar los riesgos de seguridad.'
            };

            // Referencias a elementos del DOM
            const contentArea = document.getElementById('content-area');
            const navItems = document.querySelectorAll('.nav-item');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const badgesContainer = document.getElementById('badges-container');
            const simulatorResult = document.getElementById('simulation-result');
            const openSidebarBtn = document.getElementById('open-sidebar');
            const sidebar = document.getElementById('sidebar');
            const toggleSidebarBtn = document.getElementById('toggle-sidebar');
            const welcomeSection = document.getElementById('welcome-section');

            // Función para actualizar la UI según el estado
            function renderUI() {
                // Oculta todas las secciones de contenido
                document.querySelectorAll('#content-area > div').forEach(section => {
                    section.classList.remove('active');
                    section.style.display = 'none'; // Usa display none para evitar problemas de layout
                });
                
                // Muestra la sección actual
                const currentSectionElement = document.getElementById(appState.currentSection);
                if (currentSectionElement) {
                    currentSectionElement.classList.add('active');
                    currentSectionElement.style.display = 'block';
                } else {
                    // Si no se encuentra, muestra la sección de bienvenida por defecto
                    welcomeSection.classList.add('active');
                    welcomeSection.style.display = 'block';
                }

                // Actualiza la clase activa en el menú de navegación
                navItems.forEach(item => {
                    if (item.getAttribute('data-section') === appState.currentSection) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });

                // Actualiza el progreso
                const progressPercentage = (appState.completedModules.size / appState.totalModules) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                progressText.textContent = `${Math.round(progressPercentage)}%`;
            }

            // Manejador de clic en la navegación
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    appState.currentSection = item.getAttribute('data-section');
                    renderUI();
                    if (window.innerWidth <= 768) {
                        sidebar.classList.add('hidden');
                    }
                });
            });

            // Manejador del botón de abrir la sidebar en móviles
            openSidebarBtn.addEventListener('click', () => {
                sidebar.classList.remove('hidden');
            });

            // Manejador del botón de cerrar la sidebar en móviles
            toggleSidebarBtn.addEventListener('click', () => {
                sidebar.classList.add('hidden');
            });

            // Lógica para los tests
            contentArea.addEventListener('click', (e) => {
                if (e.target.classList.contains('check-answers-btn')) {
                    const testId = e.target.closest('.test-section').querySelector('div[id^="test-"]').id;
                    const answers = testAnswers[testId];
                    let correctAnswers = 0;
                    const questions = document.querySelectorAll(`#${testId} > div`);

                    questions.forEach(qDiv => {
                        const questionName = qDiv.querySelector('input').name;
                        const selectedAnswer = document.querySelector(`input[name="${questionName}"]:checked`);
                        const feedbackText = qDiv.querySelector('.feedback-text');

                        if (selectedAnswer) {
                            if (selectedAnswer.value === answers[questionName]) {
                                feedbackText.textContent = '¡Correcto!';
                                feedbackText.classList.remove('incorrect');
                                feedbackText.classList.add('correct');
                                correctAnswers++;
                            } else {
                                const fullFeedback = answers.feedback[selectedAnswer.value] || 'Incorrecto. La respuesta correcta es ' + answers[questionName].toUpperCase() + '.';
                                feedbackText.textContent = fullFeedback;
                                feedbackText.classList.remove('correct');
                                feedbackText.classList.add('incorrect');
                            }
                        } else {
                            feedbackText.textContent = 'Por favor, selecciona una respuesta.';
                            feedbackText.classList.remove('correct');
                            feedbackText.classList.add('incorrect');
                        }
                    });

                    // Actualizar estado si el test está completo
                    if (correctAnswers === questions.length) {
                        const moduleId = e.target.closest('.module-content').id;
                        if (!appState.completedModules.has(moduleId)) {
                            appState.completedModules.add(moduleId);
                            appState.score += questions.length; // Suma puntos por test completado
                            unlockBadge(moduleId); // Desbloquea el logro
                            renderUI();
                            showMessage(`¡Módulo Completado! Has ganado ${questions.length} puntos.`, 'success');
                        }
                    } else {
                        showMessage('Parece que algunas respuestas son incorrectas. Inténtalo de nuevo.', 'warning');
                    }
                }
            });

            // Función para mostrar mensajes de forma temporal
            function showMessage(message, type) {
                const messageBox = document.createElement('div');
                messageBox.textContent = message;
                messageBox.classList.add('fixed', 'bottom-4', 'left-1/2', '-translate-x-1/2', 'p-4', 'rounded-lg', 'shadow-xl', 'text-white', 'font-semibold', 'z-50');

                if (type === 'success') {
                    messageBox.classList.add('bg-green-500');
                } else if (type === 'warning') {
                    messageBox.classList.add('bg-yellow-500');
                } else if (type === 'error') {
                    messageBox.classList.add('bg-red-500');
                }

                document.body.appendChild(messageBox);
                setTimeout(() => {
                    messageBox.remove();
                }, 3000);
            }

            // Lógica para desbloquear logros
            function unlockBadge(moduleId) {
                const badgeName = moduleBadges[moduleId];
                if (badgeName && !appState.badges.has(badgeName)) {
                    appState.badges.add(badgeName);
                    const badgeContainers = badgesContainer.querySelectorAll('.badge-container');
                    badgeContainers.forEach(container => {
                        if (container.querySelector('p').textContent === badgeName) {
                            const icon = container.querySelector('i');
                            icon.classList.remove('text-gray-300');
                            icon.classList.add('text-yellow-500');
                            container.querySelector('p').classList.remove('text-gray-500');
                            container.querySelector('p').classList.add('text-gray-800');
                            container.classList.add('badge-unlocked');
                        }
                    });
                }
            }
            
            // Lógica para el juego de emparejamiento
            let draggedItem = null;
            const termItems = document.querySelectorAll('.term-item');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            termItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = e.target;
                    e.dataTransfer.setData('text/plain', e.target.dataset.term);
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (draggedItem) {
                        const term = e.dataTransfer.getData('text/plain');
                        const def = e.target.dataset.def;
                        const matchFeedback = document.getElementById('match-feedback');

                        if ((term === 'DORA' && def === 'financial-resilience') ||
                            (term === 'NIS2' && def === 'critical-sectors') ||
                            (term === 'ISO' && def === 'info-security-standard')) {
                            e.target.textContent = draggedItem.textContent;
                            e.target.classList.remove('border-dashed', 'border-gray-400');
                            e.target.classList.add('bg-green-200');
                            draggedItem.remove();
                            matchFeedback.textContent = '¡Emparejamiento correcto!';
                            matchFeedback.classList.remove('incorrect');
                            matchFeedback.classList.add('correct');
                        } else {
                            matchFeedback.textContent = 'Inténtalo de nuevo.';
                            matchFeedback.classList.remove('correct');
                            matchFeedback.classList.add('incorrect');
                        }
                    }
                });
            });

            // Lógica para el juego de completar frases
            let blankDragItem = null;
            const wordBankItems = document.querySelectorAll('.word-bank-item');
            const blankDropZone = document.getElementById('blank-drop-zone');
            const checkBlankBtn = document.getElementById('check-fill-in-the-blank');
            const blankFeedback = document.getElementById('fill-in-the-blank-feedback');
            const correctWords = ['Esenciales', 'Importantes'];
            const droppedWords = [];

            wordBankItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    blankDragItem = e.target;
                    e.dataTransfer.setData('text/plain', e.target.dataset.word);
                });
            });

            blankDropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
            });

            blankDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                const word = e.dataTransfer.getData('text/plain');
                if (word) {
                    const droppedWordElement = document.createElement('span');
                    droppedWordElement.textContent = word;
                    droppedWordElement.classList.add('p-2', 'bg-blue-200', 'rounded-lg', 'mx-1');
                    blankDropZone.appendChild(droppedWordElement);
                    droppedWords.push(word);
                    blankDragItem.style.display = 'none'; // Oculta la palabra del banco
                    blankDropZone.querySelector('.placeholder-text')?.remove();
                }
            });

            checkBlankBtn.addEventListener('click', () => {
                if (droppedWords.length !== 2) {
                    blankFeedback.textContent = 'Por favor, arrastra dos palabras.';
                    blankFeedback.classList.remove('correct');
                    blankFeedback.classList.add('incorrect');
                    return;
                }
                if (droppedWords[0] === correctWords[0] && droppedWords[1] === correctWords[1]) {
                    blankFeedback.textContent = '¡Felicidades, la frase es correcta!';
                    blankFeedback.classList.remove('incorrect');
                    blankFeedback.classList.add('correct');
                } else {
                    blankFeedback.textContent = 'Incorrecto. Inténtalo de nuevo.';
                    blankFeedback.classList.remove('correct');
                    blankFeedback.classList.add('incorrect');
                }
            });
            
            // Lógica para el simulador
            document.getElementById('simulate-btn').addEventListener('click', () => {
                const control = document.getElementById('control-select').value;
                const resultDiv = document.getElementById('simulation-result');
                resultDiv.classList.remove('hidden');

                if (control === 'none') {
                    resultDiv.innerHTML = `<p class="text-red-600 font-semibold">Por favor, selecciona un control para simular.</p>`;
                    return;
                }

                let message = '';
                let resultClass = '';
                if (control === 'concienciacion') {
                    message = '¡Éxito! Gracias a una campaña de formación, el empleado reconoció el correo como phishing y no hizo clic. El incidente se ha evitado.';
                    resultClass = 'bg-green-200 text-green-800';
                } else if (control === 'acceso-fisico') {
                    message = '¡Error! Este control no es relevante para el escenario. Un control de acceso físico no detiene un ataque de phishing.';
                    resultClass = 'bg-red-200 text-red-800';
                } else if (control === 'copias-seguridad') {
                    message = '¡Error! Este control no es relevante para el escenario inmediato. Las copias de seguridad son útiles para la recuperación, pero no evitan el incidente inicial.';
                    resultClass = 'bg-red-200 text-red-800';
                }
                
                resultDiv.innerHTML = `<p class="font-semibold">${message}</p>`;
                resultDiv.className = `mt-4 p-4 rounded-lg ${resultClass}`;
            });

            // Lógica del glosario
            document.getElementById('content-area').addEventListener('click', (e) => {
                if (e.target.classList.contains('glossary-term')) {
                    const term = e.target.dataset.term;
                    const definition = glossaryData[term];
                    if (definition) {
                        showMessage(definition, 'success');
                    }
                }
            });

            // Inicia la UI
            renderUI();
        });
    </script>
</body>
</html>
